<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‹¨ê° - ë‚´ ì‘ì—… ê´€ë¦¬</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: white;
            padding: 1rem 2rem;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .back-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #666;
            cursor: pointer;
            padding: 0.5rem;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: #f0f0f0;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            color: #2d5a27;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
        }

        .logo::before {
            content: "ğŸŠ";
            font-size: 2rem;
        }

        .header-actions {
            display: flex;
            gap: 1rem;
            align-items: center;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #2d5a27;
            color: white;
        }

        .btn-primary:hover {
            background: #1e3d1a;
            transform: translateY(-2px);
        }

        .btn-outline {
            border: 2px solid #2d5a27;
            color: #2d5a27;
            background: transparent;
        }

        .btn-outline:hover {
            background: #2d5a27;
            color: white;
        }

        .btn-small {
            padding: 0.5rem 1rem;
            font-size: 0.9rem;
        }

        .btn-danger {
            background: #dc3545;
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #218838;
        }

        /* Container */
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 2rem;
        }

        /* Page Header */
        .page-header {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .page-title {
            font-size: 1.8rem;
            color: #2d5a27;
            margin-bottom: 0.5rem;
        }

        .page-subtitle {
            color: #666;
            margin-bottom: 1.5rem;
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            background: linear-gradient(135deg, #2d5a27, #4a7c59);
            color: white;
            padding: 1.5rem;
            border-radius: 12px;
            text-align: center;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: 0.5rem;
        }

        .stat-label {
            font-size: 0.9rem;
            opacity: 0.9;
        }

        .stat-card.recruiting {
            background: linear-gradient(135deg, #17a2b8, #20c997);
        }

        .stat-card.completed {
            background: linear-gradient(135deg, #28a745, #34ce57);
        }

        .stat-card.expired {
            background: linear-gradient(135deg, #6c757d, #868e96);
        }

        /* Filter Bar */
        .filter-bar {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            margin-bottom: 2rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            display: flex;
            gap: 1rem;
            align-items: center;
            flex-wrap: wrap;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .filter-select {
            padding: 0.5rem 1rem;
            border: 1px solid #ddd;
            border-radius: 8px;
            background: white;
            cursor: pointer;
        }

        .search-input {
            flex: 1;
            min-width: 200px;
            padding: 0.75rem;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: #2d5a27;
        }

        /* Requests Section */
        .requests-section {
            background: white;
            border-radius: 15px;
            padding: 1.5rem;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .results-count {
            color: #666;
            font-size: 0.9rem;
        }

        .sort-options {
            display: flex;
            gap: 0.5rem;
        }

        .sort-btn {
            padding: 0.4rem 0.8rem;
            border: 1px solid #ddd;
            background: white;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .sort-btn.active {
            background: #2d5a27;
            color: white;
            border-color: #2d5a27;
        }

        /* Request Items */
        .request-item {
            border: 1px solid #eee;
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
            position: relative;
        }

        .request-item:hover {
            border-color: #2d5a27;
            box-shadow: 0 5px 15px rgba(45, 90, 39, 0.1);
            transform: translateY(-2px);
        }

        .request-item:last-child {
            margin-bottom: 0;
        }

        .request-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 1rem;
        }

        .request-info h3 {
            font-size: 1.2rem;
            color: #333;
            margin-bottom: 0.5rem;
        }

        .request-meta {
            display: flex;
            gap: 1rem;
            align-items: center;
            font-size: 0.9rem;
            color: #666;
            margin-bottom: 0.5rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.3rem;
        }

        .request-category {
            background: #e8f5e8;
            color: #2d5a27;
            padding: 0.3rem 0.8rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .request-status {
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 0.5rem;
        }

        .status-badge {
            padding: 0.4rem 1rem;
            border-radius: 15px;
            font-size: 0.9rem;
            font-weight: 600;
            text-align: center;
            min-width: 80px;
        }

        .status-recruiting {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }

        .status-in-progress {
            background: #fff3cd;
            color: #856404;
            border: 1px solid #ffeaa7;
        }

        .status-completed {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .status-expired {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .request-time {
            font-size: 0.8rem;
            color: #999;
        }

        .request-description {
            color: #555;
            line-height: 1.6;
            margin-bottom: 1rem;
            display: -webkit-box;
            -webkit-line-clamp: 2;
            -webkit-box-orient: vertical;
            overflow: hidden;
        }

        .applicants-section {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 1rem;
            margin-bottom: 1rem;
        }

        .applicants-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .applicants-count {
            font-weight: 600;
            color: #2d5a27;
        }

        .view-all-applicants {
            color: #666;
            font-size: 0.9rem;
            cursor: pointer;
            text-decoration: underline;
        }

        .applicants-preview {
            display: flex;
            gap: 1rem;
            flex-wrap: wrap;
        }

        .applicant-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem;
            background: white;
            border-radius: 8px;
            border: 1px solid #dee2e6;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .applicant-item:hover {
            border-color: #2d5a27;
            background: #f0f8f0;
        }

        .applicant-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #2d5a27, #4a7c59);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            color: white;
            font-weight: bold;
        }

        .applicant-info {
            display: flex;
            flex-direction: column;
        }

        .applicant-name {
            font-size: 0.9rem;
            font-weight: 600;
            color: #333;
        }

        .applicant-rating {
            font-size: 0.8rem;
            color: #666;
        }

        .request-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 1rem;
            border-top: 1px solid #f0f0f0;
        }

        .payment-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .payment-amount {
            font-size: 1.1rem;
            font-weight: 600;
            color: #2d5a27;
        }

        .work-date {
            color: #666;
            font-size: 0.9rem;
        }

        .request-actions {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        /* Urgent Badge */
        .urgent-badge {
            position: absolute;
            top: 1rem;
            right: 1rem;
            background: #dc3545;
            color: white;
            padding: 0.3rem 0.6rem;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.7; }
            100% { opacity: 1; }
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
            color: #666;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            opacity: 0.5;
        }

        .empty-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
        }

        .empty-description {
            margin-bottom: 2rem;
        }

        /* Modal */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal.show {
            display: flex;
        }

        .modal-content {
            background: white;
            border-radius: 15px;
            padding: 2rem;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #eee;
        }

        .modal-title {
            font-size: 1.3rem;
            font-weight: 600;
            color: #333;
        }

        .close-btn {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #666;
        }

        .applicant-detail {
            padding: 1rem;
            border: 1px solid #eee;
            border-radius: 10px;
            margin-bottom: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .applicant-detail:hover {
            border-color: #2d5a27;
            background: #f8f9fa;
        }

        .applicant-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .applicant-main-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .applicant-details h4 {
            color: #333;
            margin-bottom: 0.3rem;
        }

        .applicant-stats {
            display: flex;
            gap: 1rem;
            font-size: 0.9rem;
            color: #666;
        }

        .applicant-message {
            background: #f8f9fa;
            padding: 1rem;
            border-radius: 8px;
            margin: 1rem 0;
            border-left: 3px solid #2d5a27;
        }

        .message-content {
            color: #555;
            line-height: 1.5;
        }

        .applicant-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .request-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }
            
            .request-status {
                align-items: flex-start;
                width: 100%;
            }
            
            .request-meta {
                flex-wrap: wrap;
            }
            
            .filter-bar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .search-input {
                min-width: unset;
            }
            
            .request-footer {
                flex-direction: column;
                align-items: flex-start;
                gap: 1rem;
            }

            .request-actions {
                width: 100%;
                justify-content: flex-start;
            }
        }

        .notification-dot {
            position: absolute;
            top: 0.5rem;
            left: 0.5rem;
            width: 12px;
            height: 12px;
            background: #dc3545;
            border-radius: 50%;
            border: 2px solid white;
        }
    </style>
</head>
<body>
    <header class="header">
        <div class="header-left">
            <button class="back-btn" onclick="goBack()">â†</button>
            <a href="#" class="logo">ë‹¨ê°</a>
        </div>
        <div class="header-actions">
            <a href="#" class="btn btn-outline">ì¼ê±°ë¦¬ ì°¾ê¸°</a>
            <a href="#" class="btn btn-primary">+ ìƒˆ ì‘ì—… ë“±ë¡</a>
        </div>
    </header>

    <div class="container">
        <!-- Page Header with Stats -->
        <div class="page-header">
            <h1 class="page-title">ë‚´ ì‘ì—… ê´€ë¦¬</h1>
            <p class="page-subtitle">ë“±ë¡í•œ ì‘ì—…ì˜ í˜„í™©ì„ í™•ì¸í•˜ê³  ì§€ì›ìë“¤ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
            
            <div class="stats-grid">
                <div class="stat-card recruiting">
                    <div class="stat-number">5</div>
                    <div class="stat-label">ëª¨ì§‘ì¤‘ì¸ ì‘ì—…</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number">23</div>
                    <div class="stat-label">ì´ ì§€ì›ì ìˆ˜</div>
                </div>
                <div class="stat-card completed">
                    <div class="stat-number">12</div>
                    <div class="stat-label">ì™„ë£Œëœ ì‘ì—…</div>
                </div>
                <div class="stat-card expired">
                    <div class="stat-number">3</div>
                    <div class="stat-label">ê¸°ê°„ ë§Œë£Œ</div>
                </div>
            </div>
        </div>

        <!-- Filter Bar -->
        <div class="filter-bar">
            <div class="filter-group">
                <label>ìƒíƒœ:</label>
                <select class="filter-select" id="statusFilter">
                    <option value="">ì „ì²´</option>
                    <option value="recruiting">ëª¨ì§‘ì¤‘</option>
                    <option value="in-progress">ì§„í–‰ì¤‘</option>
                    <option value="completed">ì™„ë£Œ</option>
                    <option value="expired">ë§Œë£Œ</option>
                </select>
            </div>
            
            <div class="filter-group">
                <label>ë¶„ì•¼:</label>
                <select class="filter-select" id="categoryFilter">
                    <option value="">ì „ì²´</option>
                    <option value="rice">ë…¼ë†ì‚¬</option>
                    <option value="field">ë°­ë†ì‚¬</option>
                    <option value="fruit">ê³¼ìˆ˜ì›</option>
                    <option value="livestock">ì¶•ì‚°ì—…</option>
                    <option value="facility">ì‹œì„¤ê´€ë¦¬</option>
                </select>
            </div>
            
            <input type="text" class="search-input" placeholder="ì‘ì—… ì œëª©ìœ¼ë¡œ ê²€ìƒ‰..." id="searchInput">
            <button class="btn btn-primary btn-small" onclick="searchRequests()">ê²€ìƒ‰</button>
        </div>

        <!-- Requests Section -->
        <div class="requests-section">
            <div class="section-header">
                <div class="results-count">ì´ <strong>8</strong>ê°œì˜ ë“±ë¡ëœ ì‘ì—…</div>
                <div class="sort-options">
                    <button class="sort-btn active" data-sort="recent">ìµœì‹ ìˆœ</button>
                    <button class="sort-btn" data-sort="applicants">ì§€ì›ììˆœ</button>
                    <button class="sort-btn" data-sort="date">ì‘ì—…ì¼ìˆœ</button>
                    <button class="sort-btn" data-sort="status">ìƒíƒœìˆœ</button>
                </div>
            </div>

            <div class="requests-list" id="requestsList">
                <!-- ìš”ì²­ ëª©ë¡ì´ ì—¬ê¸°ì— ë™ì ìœ¼ë¡œ ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <!-- Applicants Modal -->
    <div class="modal" id="applicantsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">ì§€ì›ì ëª©ë¡</h3>
                <button class="close-btn" onclick="closeModal()">&times;</button>
            </div>
            
            <div id="applicantsDetail">
                <!-- ì§€ì›ì ìƒì„¸ ëª©ë¡ì´ ì—¬ê¸°ì— ì¶”ê°€ë©ë‹ˆë‹¤ -->
            </div>
        </div>
    </div>

    <script>
        // ìƒ˜í”Œ ë°ì´í„°
        const sampleRequests = [
            {
                id: 1,
                title: "ë²¼ ìˆ˜í™• ì‘ì—… (ì½¤ë°”ì¸ ë³´ìœ ì ìš°ëŒ€)",
                category: "ë…¼ë†ì‚¬",
                location: "ì „ë¶ ì™„ì£¼êµ° ê³ ì‚°ë©´",
                price: "180,000",
                priceType: "ì¼ë‹¹",
                status: "recruiting",
                createdAt: "2025-09-04T10:30:00",
                workDate: "2025-09-06",
                urgent: true,
                description: "ì•½ 3ë§Œí‰ ê·œëª¨ì˜ ë²¼ë…¼ì—ì„œ ìˆ˜í™• ì‘ì—…ì„ ì§„í–‰í•©ë‹ˆë‹¤. ì½¤ë°”ì¸ì„ ë³´ìœ í•˜ì‹  ë¶„ì„ ìš°ëŒ€í•©ë‹ˆë‹¤.",
                applicantsCount: 5,
                viewsCount: 47,
                applicants: [
                    {
                        id: 1,
                        name: "ì´ë†ë¶€",
                        rating: 4.8,
                        completedWorks: 23,
                        hasEquipment: true,
                        message: "ì•ˆë…•í•˜ì„¸ìš”! 5ë…„ì°¨ ë†ì‘ì—… ì „ë¬¸ê°€ì…ë‹ˆë‹¤. ì½¤ë°”ì¸ ë³´ìœ í•˜ê³  ìˆìœ¼ë©° ë²¼ ìˆ˜í™• ê²½í—˜ì´ í’ë¶€í•©ë‹ˆë‹¤.",
                        appliedAt: "2025-09-04T11:30:00"
                    },
                    {
                        id: 2,
                        name: "ë°•ê¸°ê³„",
                        rating: 4.9,
                        completedWorks: 45,
                        hasEquipment: true,
                        message: "ëŒ€í˜• ì½¤ë°”ì¸ 2ëŒ€ ë³´ìœ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì‹ ì†í•˜ê³  ì •í™•í•œ ì‘ì—… ì•½ì†ë“œë¦½ë‹ˆë‹¤.",
                        appliedAt: "2025-09-04T12:15:00"
                    }
                ]
            },
            {
                id: 2,
                title: "ë”¸ê¸°ë°­ ì •ë¦¬ ë° ëª¨ì¢… ì‹¬ê¸°",
                category: "ë°­ë†ì‚¬",
                location: "ì „ë¶ ì „ì£¼ì‹œ ë•ì§„êµ¬",
                price: "15,000",
                priceType: "ì‹œê¸‰",
                status: "in-progress",
                createdAt: "2025-09-03T14:20:00",
                workDate: "2025-09-05",
                urgent: false,
                description: "ê²¨ìš¸ì²  ë”¸ê¸° ì¬ë°°ë¥¼ ìœ„í•œ ë°­ ì •ë¦¬ì™€ ëª¨ì¢… ì‹¬ê¸° ì‘ì—…ì…ë‹ˆë‹¤.",
                applicantsCount: 8,
                viewsCount: 62,
                selectedApplicant: "ê¹€ë”¸ê¸°",
                applicants: [
                    {
                        id: 3,
                        name: "ê¹€ë”¸ê¸°",
                        rating: 4.7,
                        completedWorks: 18,
                        hasEquipment: false,
                        message: "ë”¸ê¸° ë†ì‚¬ ì „ë¬¸ìœ¼ë¡œ í•˜ê³  ìˆìŠµë‹ˆë‹¤. ì •ì„±ê» ì‘ì—…í•˜ê² ìŠµë‹ˆë‹¤.",
                        appliedAt: "2025-09-03T15:30:00",
                        selected: true
                    }
                ]
            },
            {
                id: 3,
                title: "ì¶•ì‚¬ ì²­ì†Œ ë° ì‚¬ë£Œ ë°°ê¸‰",
                category: "ì¶•ì‚°ì—…",
                location: "ì „ë¶ ì§„ì•ˆêµ° ë§ˆë ¹ë©´",
                price: "120,000",
                priceType: "ì¼ë‹¹",
                status: "completed",
                createdAt: "2025-08-28T16:45:00",
                workDate: "2025-08-30",
                urgent: false,
                description: "í•œìš° 60ë‘ ê·œëª¨ ì¶•ì‚¬ì˜ ì¼ì¼ ê´€ë¦¬ ì—…ë¬´ì…ë‹ˆë‹¤.",
                applicantsCount: 3,
                viewsCount: 28,
                completedBy: "ì •ì¶•ì‚°",
                rating: 5,
                review: "ë§¤ìš° ì„±ì‹¤í•˜ê²Œ ì‘ì—…í•´ì£¼ì…¨ìŠµë‹ˆë‹¤."
            }
        ];

        // ìƒíƒœë³„ í•œê¸€ ë§¤í•‘
        const statusMap = {
            'recruiting': 'ëª¨ì§‘ì¤‘',
            'in-progress': 'ì§„í–‰ì¤‘',
            'completed': 'ì™„ë£Œë¨',
            'expired': 'ë§Œë£Œë¨'
        };

        // ì¹´í…Œê³ ë¦¬ í•œì˜ ë§¤í•‘
        const categoryMap = {
            "ë…¼ë†ì‚¬": "rice",
            "ë°­ë†ì‚¬": "field", 
            "ê³¼ìˆ˜ì›": "fruit",
            "ì¶•ì‚°ì—…": "livestock",
            "ì‹œì„¤ê´€ë¦¬": "facility"
        };

        // ìš”ì²­ í•­ëª© ë Œë”ë§
        function renderRequests(requests) {
            const container = document.getElementById('requestsList');
            
            if (requests.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">ğŸ“</div>
                        <h3 class="empty-title">ë“±ë¡í•œ ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤</h3>
                        <p class="empty-description">ìƒˆë¡œìš´ ì‘ì—…ì„ ë“±ë¡í•´ë³´ì„¸ìš”!</p>
                        <a href="#" class="btn btn-primary">+ ìƒˆ ì‘ì—… ë“±ë¡</a>
                    </div>
                `;
                return;
            }

            container.innerHTML = requests.map(request => `
                <div class="request-item">
                    ${request.urgent ? '<div class="urgent-badge">ê¸´ê¸‰</div>' : ''}
                    ${request.applicantsCount > 0 && request.status === 'recruiting' ? '<div class="notification-dot"></div>' : ''}
                    
                    <div class="request-header">
                        <div class="request-info">
                            <h3>${request.title}</h3>
                            <div class="request-meta">
                                <div class="meta-item">ğŸ“ ${request.location}</div>
                                <div class="meta-item">ğŸ“… ${request.workDate}</div>
                                <div class="meta-item">ğŸ‘ï¸ ${request.viewsCount}íšŒ ì¡°íšŒ</div>
                            </div>
                            <div class="request-category">${request.category}</div>
                        </div>
                        <div class="request-status">
                            <div class="status-badge status-${request.status}">
                                ${statusMap[request.status]}
                            </div>
                            <div class="request-time">${formatTime(request.createdAt)} ë“±ë¡</div>
                        </div>
                    </div>
                    
                    <div class="request-description">${request.description}</div>
                    
                    ${renderApplicantsSection(request)}
                    
                    <div class="request-footer">
                        <div class="payment-info">
                            <span class="payment-amount">${parseInt(request.price).toLocaleString()}ì›</span>
                            <span class="work-date">${request.priceType}</span>
                        </div>
                        <div class="request-actions">
                            ${getRequestActions(request)}
                        </div>
                    </div>
                </div>
            `).join('');
        }

        // ì§€ì›ì ì„¹ì…˜ ë Œë”ë§
        function renderApplicantsSection(request) {
            if (request.status === 'completed') {
                return `
                    <div class="applicants-section">
                        <div class="applicants-header">
                            <span class="applicants-count">âœ… ì‘ì—… ì™„ë£Œ: ${request.completedBy}ë‹˜</span>
                            <span style="color: #ffc107;">${'â˜…'.repeat(request.rating)}${request.rating}/5</span>
                        </div>
                        <div style="color: #666; font-style: italic;">"${request.review}"</div>
                    </div>
                `;
            }
            
            if (request.status === 'in-progress' && request.selectedApplicant) {
                return `
                    <div class="applicants-section">
                        <div class="applicants-header">
                            <span class="applicants-count">ğŸš€ ì§„í–‰ì¤‘: ${request.selectedApplicant}ë‹˜ê³¼ ì‘ì—… ì¤‘</span>
                            <span class="view-all-applicants" onclick="contactWorker(${request.id})">ì—°ë½í•˜ê¸°</span>
                        </div>
                    </div>
                `;
            }
            
            if (request.applicantsCount === 0) {
                return `
                    <div class="applicants-section">
                        <div class="applicants-header">
                            <span class="applicants-count">ì•„ì§ ì§€ì›ìê°€ ì—†ìŠµë‹ˆë‹¤</span>
                        </div>
                    </div>
                `;
            }
            
            const previewApplicants = request.applicants ? request.applicants.slice(0, 3) : [];
            
            return `
                <div class="applicants-section">
                    <div class="applicants-header">
                        <span class="applicants-count">ğŸ‘¥ ${request.applicantsCount}ëª…ì´ ì§€ì›í–ˆìŠµë‹ˆë‹¤</span>
                        <span class="view-all-applicants" onclick="viewAllApplicants(${request.id})">ì „ì²´ ë³´ê¸°</span>
                    </div>
                    <div class="applicants-preview">
                        ${previewApplicants.map(applicant => `
                            <div class="applicant-item" onclick="viewApplicantDetail(${request.id}, ${applicant.id})">
                                <div class="applicant-avatar">${applicant.name.charAt(0)}</div>
                                <div class="applicant-info">
                                    <div class="applicant-name">${applicant.name}</div>
                                    <div class="applicant-rating">â­ ${applicant.rating} (${applicant.completedWorks}íšŒ)</div>
                                </div>
                            </div>
                        `).join('')}
                        ${request.applicantsCount > 3 ? `<div class="applicant-item">+${request.applicantsCount - 3}ëª… ë”</div>` : ''}
                    </div>
                </div>
            `;
        }

        // ìš”ì²­ë³„ ì•¡ì…˜ ë²„íŠ¼
        function getRequestActions(request) {
            switch(request.status) {
                case 'recruiting':
                    return `
                        <button class="btn btn-primary btn-small" onclick="viewAllApplicants(${request.id})">ì§€ì›ì ê´€ë¦¬</button>
                        <button class="btn btn-outline btn-small" onclick="editRequest(${request.id})">ìˆ˜ì •</button>
                        <button class="btn btn-danger btn-small" onclick="closeRequest(${request.id})">ë§ˆê°</button>
                    `;
                case 'in-progress':
                    return `
                        <button class="btn btn-primary btn-small" onclick="contactWorker(${request.id})">ì—°ë½í•˜ê¸°</button>
                        <button class="btn btn-success btn-small" onclick="completeWork(${request.id})">ì™„ë£Œì²˜ë¦¬</button>
                    `;
                case 'completed':
                    return `
                        <button class="btn btn-outline btn-small" onclick="viewWorkDetail(${request.id})">ìƒì„¸ë³´ê¸°</button>
                        <button class="btn btn-outline btn-small" onclick="rehireWorker(${request.id})">ì¬ê³ ìš©</button>
                    `;
                case 'expired':
                    return `
                        <button class="btn btn-outline btn-small" onclick="repostRequest(${request.id})">ì¬ë“±ë¡</button>
                        <button class="btn btn-danger btn-small" onclick="deleteRequest(${request.id})">ì‚­ì œ</button>
                    `;
                default:
                    return '';
            }
        }

        // ì‹œê°„ í¬ë§·íŒ…
        function formatTime(timeString) {
            const date = new Date(timeString);
            const now = new Date();
            const diffInHours = Math.floor((now - date) / (1000 * 60 * 60));
            
            if (diffInHours < 1) return 'ë°©ê¸ˆ ì „';
            if (diffInHours < 24) return `${diffInHours}ì‹œê°„ ì „`;
            
            const diffInDays = Math.floor(diffInHours / 24);
            if (diffInDays < 7) return `${diffInDays}ì¼ ì „`;
            
            return date.toLocaleDateString();
        }

        // í•„í„°ë§ í•¨ìˆ˜
        function filterRequests() {
            const statusFilter = document.getElementById('statusFilter').value;
            const categoryFilter = document.getElementById('categoryFilter').value;
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            
            let filtered = sampleRequests;
            
            if (statusFilter) {
                filtered = filtered.filter(request => request.status === statusFilter);
            }
            
            if (categoryFilter) {
                filtered = filtered.filter(request => categoryMap[request.category] === categoryFilter);
            }
            
            if (searchTerm) {
                filtered = filtered.filter(request => 
                    request.title.toLowerCase().includes(searchTerm) ||
                    request.location.toLowerCase().includes(searchTerm)
                );
            }
            
            return filtered;
        }

        // ì •ë ¬ í•¨ìˆ˜
        function sortRequests(requests, sortBy) {
            const sorted = [...requests];
            
            switch(sortBy) {
                case 'recent':
                    return sorted.sort((a, b) => new Date(b.createdAt) - new Date(a.createdAt));
                case 'applicants':
                    return sorted.sort((a, b) => b.applicantsCount - a.applicantsCount);
                case 'date':
                    return sorted.sort((a, b) => new Date(a.workDate) - new Date(b.workDate));
                case 'status':
                    const statusOrder = ['recruiting', 'in-progress', 'completed', 'expired'];
                    return sorted.sort((a, b) => statusOrder.indexOf(a.status) - statusOrder.indexOf(b.status));
                default:
                    return sorted;
            }
        }

        // ìš”ì²­ ëª©ë¡ ì—…ë°ì´íŠ¸
        function updateRequestsList() {
            const filtered = filterRequests();
            const sortBy = document.querySelector('.sort-btn.active').dataset.sort;
            const sorted = sortRequests(filtered, sortBy);
            renderRequests(sorted);
            
            document.querySelector('.results-count').innerHTML = 
                `ì´ <strong>${sorted.length}</strong>ê°œì˜ ë“±ë¡ëœ ì‘ì—…`;
        }

        // ê²€ìƒ‰ í•¨ìˆ˜
        function searchRequests() {
            updateRequestsList();
        }

        // ì „ì²´ ì§€ì›ì ë³´ê¸°
        function viewAllApplicants(requestId) {
            const request = sampleRequests.find(r => r.id === requestId);
            if (!request || !request.applicants) return;
            
            document.querySelector('.modal-title').textContent = `"${request.title}" ì§€ì›ì ëª©ë¡`;
            
            const applicantsDetail = document.getElementById('applicantsDetail');
            applicantsDetail.innerHTML = request.applicants.map(applicant => `
                <div class="applicant-detail">
                    <div class="applicant-header">
                        <div class="applicant-main-info">
                            <div class="applicant-avatar" style="width: 50px; height: 50px; font-size: 1.2rem;">${applicant.name.charAt(0)}</div>
                            <div class="applicant-details">
                                <h4>${applicant.name} ${applicant.hasEquipment ? 'ğŸšœ' : ''}</h4>
                                <div class="applicant-stats">
                                    <span>â­ ${applicant.rating}</span>
                                    <span>ì™„ë£Œ ${applicant.completedWorks}íšŒ</span>
                                    <span>${formatTime(applicant.appliedAt)} ì§€ì›</span>
                                </div>
                            </div>
                        </div>
                        <div class="applicant-actions">
                            <button class="btn btn-outline btn-small" onclick="contactApplicant(${requestId}, ${applicant.id})">ì—°ë½</button>
                            <button class="btn btn-primary btn-small" onclick="selectApplicant(${requestId}, ${applicant.id})">ì„ íƒ</button>
                        </div>
                    </div>
                    <div class="applicant-message">
                        <div class="message-content">${applicant.message}</div>
                    </div>
                </div>
            `).join('');
            
            document.getElementById('applicantsModal').classList.add('show');
        }

        // ëª¨ë‹¬ ë‹«ê¸°
        function closeModal() {
            document.getElementById('applicantsModal').classList.remove('show');
        }

        // ì§€ì›ì ì„ íƒ
        function selectApplicant(requestId, applicantId) {
            if (confirm('ì´ ì§€ì›ìë¥¼ ì„ íƒí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ì§€ì›ìê°€ ì„ íƒë˜ì—ˆìŠµë‹ˆë‹¤. ì‘ì—…ì´ ì§„í–‰ì¤‘ ìƒíƒœë¡œ ë³€ê²½ë©ë‹ˆë‹¤.');
                closeModal();
                updateRequestsList();
            }
        }

        // ì§€ì›ì ì—°ë½
        function contactApplicant(requestId, applicantId) {
            alert('ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
            // window.location.href = `DG-chat-room.html?request=${requestId}&applicant=${applicantId}`;
        }

        // ê¸°íƒ€ ì•¡ì…˜ í•¨ìˆ˜ë“¤
        function editRequest(id) {
            alert('ì‘ì—… ìˆ˜ì • í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
            // window.location.href = `DG-work-edit.html?id=${id}`;
        }

        function closeRequest(id) {
            if (confirm('ì •ë§ë¡œ ì´ ì‘ì—…ì„ ë§ˆê°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ì‘ì—…ì´ ë§ˆê°ë˜ì—ˆìŠµë‹ˆë‹¤.');
                updateRequestsList();
            }
        }

        function contactWorker(id) {
            alert('ì‘ì—…ìì™€ì˜ ì±„íŒ…ë°©ìœ¼ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        function completeWork(id) {
            if (confirm('ì‘ì—…ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆê¹Œ?')) {
                alert('ì‘ì—… ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤. ë¦¬ë·°ë¥¼ ì‘ì„±í•´ì£¼ì„¸ìš”.');
                updateRequestsList();
            }
        }

        function viewWorkDetail(id) {
            alert('ì™„ë£Œëœ ì‘ì—… ìƒì„¸ ë‚´ì—­ì„ í™•ì¸í•©ë‹ˆë‹¤.');
        }

        function rehireWorker(id) {
            if (confirm('ê°™ì€ ì‘ì—…ìì—ê²Œ ìƒˆë¡œìš´ ì‘ì—…ì„ ì˜ë¢°í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ìƒˆ ì‘ì—… ë“±ë¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
            }
        }

        function repostRequest(id) {
            if (confirm('ì´ ì‘ì—…ì„ ë‹¤ì‹œ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ì‘ì—…ì´ ë‹¤ì‹œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.');
                updateRequestsList();
            }
        }

        function deleteRequest(id) {
            if (confirm('ì •ë§ë¡œ ì´ ì‘ì—…ì„ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                alert('ì‘ì—…ì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                updateRequestsList();
            }
        }

        function goBack() {
            window.history.back();
        }

        // ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡
        document.addEventListener('DOMContentLoaded', function() {
            renderRequests(sampleRequests);
            
            // ì •ë ¬ ë²„íŠ¼
            document.querySelectorAll('.sort-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    updateRequestsList();
                });
            });
            
            // í•„í„° ë³€ê²½
            document.getElementById('statusFilter').addEventListener('change', updateRequestsList);
            document.getElementById('categoryFilter').addEventListener('change', updateRequestsList);
            
            // ê²€ìƒ‰ Enter í‚¤
            document.getElementById('searchInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    searchRequests();
                }
            });
            
            // ëª¨ë‹¬ ì™¸ë¶€ í´ë¦­
            document.getElementById('applicantsModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    closeModal();
                }
            });
        });

        // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
        function simulateNewApplications() {
            if (Math.random() > 0.8) {
                const recruitingRequests = sampleRequests.filter(r => r.status === 'recruiting');
                if (recruitingRequests.length > 0) {
                    const randomRequest = recruitingRequests[Math.floor(Math.random() * recruitingRequests.length)];
                    randomRequest.applicantsCount += 1;
                    updateRequestsList();
                }
            }
        }

        setInterval(simulateNewApplications, 45000);
    </script>
</body>
</html>